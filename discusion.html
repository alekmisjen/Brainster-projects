<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Comments</title>
    <style>
      #comments {
        margin-top: 20px;
      }
      .comment {
        margin-bottom: 10px;
      }
      .comment-author {
        font-weight: bold;
      }
      .comment-date {
        font-size: 0.8em;
        color: gray;
      }
    </style>
  </head>
  <body>
    <div>
      <label for="username">Username:</label>
      <input type="text" id="username" required />
      <br />
      <label for="commentText">Comment:</label>
      <textarea id="commentText" required></textarea>
      <br />
      <button id="submitComment">Submit</button>
    </div>
    <div id="comments"></div>

    <script src="comments.js"></script>
    <script>
      class CommentManager {
        constructor() {
          this.commentsDiv = document.getElementById("comments");
          this.submitButton = document.getElementById("submitComment");

          // Bind event listener to the submit button
          this.submitButton.addEventListener("click", () =>
            this.submitComment()
          );

          this.loadComments();
        }

        submitComment() {
          const username = document.getElementById("username").value;
          const commentText = document.getElementById("commentText").value;

          if (username && commentText) {
            const comment = {
              username: username,
              text: commentText,
              date: new Date().toLocaleString(),
            };

            this.saveComment(comment);
            this.displayComment(comment);
            this.clearForm();
          } else {
            alert("Please enter both username and comment.");
          }
        }

        saveComment(comment) {
          let comments = JSON.parse(sessionStorage.getItem("comments")) || [];
          comments.push(comment);
          sessionStorage.setItem("comments", JSON.stringify(comments));
        }

        loadComments() {
          let comments = JSON.parse(sessionStorage.getItem("comments")) || [];
          comments.forEach((comment) => this.displayComment(comment));
        }

        displayComment(comment) {
          const commentDiv = document.createElement("div");
          commentDiv.classList.add("comment");

          const authorDiv = document.createElement("div");
          authorDiv.classList.add("comment-author");
          authorDiv.textContent = comment.username;

          const dateDiv = document.createElement("div");
          dateDiv.classList.add("comment-date");
          dateDiv.textContent = comment.date;

          const textDiv = document.createElement("div");
          textDiv.classList.add("comment-text");
          textDiv.textContent = comment.text;

          commentDiv.appendChild(authorDiv);
          commentDiv.appendChild(dateDiv);
          commentDiv.appendChild(textDiv);

          this.commentsDiv.appendChild(commentDiv);
        }

        clearForm() {
          document.getElementById("username").value = "";
          document.getElementById("commentText").value = "";
        }
      }

      // Initialize the CommentManager
      document.addEventListener("DOMContentLoaded", () => {
        new CommentManager();
      });
    </script>
  </body>
</html>
